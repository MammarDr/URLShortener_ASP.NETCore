Table URLS {
  id integer [primary key]
  short_code string [unique, not null]
  source string  [not null]
  title string
  visit_count int [default: 0]
  created_at timestamp [not null]
  created_by integer [not null]
  last_modified timestamp [not null]
  expires_at timestamp
  is_active boolean [default: true]
}

Table USERS {
  id integer [primary key, not null]
  email string  [unique, not null]
  password string [not null]
  role_id int [not null]
  plan_id int [not null]
  plan_expires_at timestamp 
  created_at timestamp [not null]
}

Table PLANS {
  id integer [primary key, not null]
  name string [not null]
  price decimal [not null]
  max_daily_url int [not null]
  has_custom_slugs boolean [not null]
  expire_after int [not null] 
  support_level string
}

Table URL_VISIT {
  id integer [primary key]
  url_id integer [not null]               
  visitor_ip string
  user_agent string
  visited_at timestamp [not null]
}

Table ACTIONS {
  id integer [primary key]
  name string [not null]
}

Table RESOURCES {
  id integer [primary key]
  name string [not null]
}

Table ROLES {
  id integer [primary key]
  name string [not null]
}

TABLE USER_ROLES {
  user_id int [not null]
  role_id int [not null]
}

Table PERMISSIONS {
  role_id int [primary key]
  action_id int [not null]
  resource_id int [not null]
}



Ref user_url: URLS.created_by > USERS.id
Ref prem_user: USERS.plan_id > PLANS.id
Ref analytic_url: URL_VISIT.url_id > URLS.id

Ref role_role: ROLES.id < USER_ROLES.role_id
Ref user_user: USERS.id < USER_ROLES.user_id

Ref role_user: PERMISSIONS.role_id > ROLES.id
Ref rec_perm: PERMISSIONS.resource_id > RESOURCES.id
Ref actiion_perm: PERMISSIONS.action_id > ACTIONS.id